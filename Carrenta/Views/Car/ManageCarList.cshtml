@model IEnumerable<Carrenta.Models.Car>

@{
  ViewBag.Title = "Manage Cats";
}

<h2>Manage cars</h2>

@Html.ActionLink("Add new car", "AddCar", "Car", new { @class = "add-new-car btn btn-success" })

<table class="table table-striped table-hover table-responsive">
  <thead>
    <tr>
      <th>Car ID</th>
      <th>Name</th>
      <th>Year</th>
      <th>Image</th>
      <th>Bodyshape</th>
      <th>Price</th>
      <th>Edit</th>
      <th>Delete</th>
    </tr>
  </thead>
  <tbody>
    @foreach (var car in ViewBag.Cars)
    {
      <tr>
        <td>@car.id</td>
        <td>@car.brand</td>
        <td>@car.year</td>
        <td>
          @{
            string imageDataURL;
            if (car.imageData != null)
            {
              string imageBase64Data = Convert.ToBase64String(car.imageData);
              imageDataURL = string.Format("data:image/png;base64,{0}", imageBase64Data);
            }
            else
            {
              imageDataURL = null;
            }
          }
          <img src="@imageDataURL" alt="Car Image" class="car-image" />
        </td>
        <td>@car.body</td>
        <td>@car.price</td>
        <td>
          <a href="/Car/Edit/@car.id">Edit</a>
        </td>
        <td>
          <a href="/Car/Delete/@car.id">Delete</a>
        </td>
      </tr>
    }
  </tbody>
</table>
